{{- if not (.Param "hideFooter") }}
{{- $background_image := .Params.background_image | default .Site.Params.footer.background_image -}}
<footer class="custom-footer{{ if $background_image }} footer-with-background{{ end }}"{{ if $background_image }} style="background-image: url('{{ $background_image }}');"{{ end }}>
    <div class="footer-overlay"></div>
    <div class="footer-content">
        <!-- Social Links Section -->
        <div class="footer-section footer-social">
            {{- if site.Params.socialIcons }}
            <div class="social-icons">
                {{- range site.Params.socialIcons }}
                <a href="{{ .url }}" target="_blank" rel="noopener noreferrer" aria-label="{{ .name }}" title="{{ .name }}">
                    <span>{{ .name }}</span>
                </a>
                {{- end }}
            </div>
            {{- end }}
        </div>

        <!-- Navigation Section -->
        <div class="footer-section footer-nav">
            {{- if site.Menus.footer }}
            <nav class="footer-menu">
                {{- range site.Menus.footer }}
                <a href="{{ .URL }}">{{ .Name }}</a>
                {{- end }}
            </nav>
            {{- end }}
        </div>

        <!-- Copyright Section -->
        <div class="footer-section footer-copyright">
            {{- if site.Params.footer.location }}
            <p class="footer-location">{{ site.Params.footer.location }}</p>
            {{- end }}
            <p class="footer-text">
                {{- if site.Copyright }}
                {{ site.Copyright | markdownify }}
                {{- else }}
                <a href="{{ "" | absLangURL }}">{{ site.Title }}</a>
                {{- end }}
            </p>
            {{- if site.Params.footer.customText }}
            <p class="footer-custom">{{ site.Params.footer.customText | markdownify }}</p>
            {{- end }}
        </div>
    </div>
</footer>

<style>
.custom-footer {
    position: relative;
    background: var(--entry);
    border-top: 2px solid var(--border);
    padding: 3rem 2rem 2rem;
    margin-top: 0;
    width: 100vw;
    margin-left: calc(-50vw + 50%);
}

/* Footer with background image */
.footer-with-background {
    background-size: cover;
    background-position: center 40%;
    background-repeat: no-repeat;
}

.footer-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.75);
    z-index: 1;
}

/* Dark mode overlay */
:root[data-theme="dark"] .footer-overlay {
    background: rgba(0, 0, 0, 0.75);
}

.footer-content {
    position: relative;
    z-index: 2;
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 2rem;
    align-items: center;
    text-align: center;
}

.footer-section {
    width: 100%;
}

/* Social Links */
.footer-social .social-icons {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 1.5rem;
}

.footer-social .social-icons a {
    color: var(--primary);
    text-decoration: none;
    font-size: 0.95rem;
    transition: color 0.2s ease;
    font-weight: 500;
}

.footer-social .social-icons a:hover {
    color: var(--tertiary);
}

/* Navigation */
.footer-nav .footer-menu {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 1.5rem;
}

.footer-nav .footer-menu a {
    color: var(--primary);
    text-decoration: none;
    font-size: 1rem;
    transition: color 0.2s ease;
}

.footer-nav .footer-menu a:hover {
    color: var(--tertiary);
}

/* Copyright */
.footer-copyright {
    color: var(--secondary);
    font-size: 0.9rem;
    line-height: 1.6;
}

.footer-location {
    margin-bottom: 0.5rem;
    font-style: italic;
}

.footer-text {
    margin: 0.5rem 0;
}

.footer-text a {
    color: var(--primary);
    text-decoration: none;
}

.footer-text a:hover {
    color: var(--tertiary);
}

.footer-custom {
    margin-top: 0.5rem;
    opacity: 0.8;
}

/* Responsive */
@media (min-width: 768px) {
    .footer-content {
        gap: 2.5rem;
    }
}

@media (max-width: 768px) {
    .footer-with-background {
        background-attachment: scroll;
    }
}
</style>
{{- end }}

{{- if (not site.Params.disableScrollToTop) }}
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>
{{- end }}

{{- partial "extend_footer.html" . }}
